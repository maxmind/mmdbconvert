# Example: Copy entire databases using path = []
# This demonstrates merging all fields from multiple databases with flexible placement.

[output]
format = "mmdb"
file = "city-with-anonymous.mmdb"

[output.mmdb]
database_type = "GeoIP2-City"
description = { en = "City + Anonymous IP Merged" }
record_size = 28

[[databases]]
name = "city"
path = "../testdata/MaxMind-DB/test-data/GeoIP2-City-Test.mmdb"

[[databases]]
name = "anonymous"
path = "../testdata/MaxMind-DB/test-data/GeoIP2-Anonymous-IP-Test.mmdb"

# Copy all City fields to root of output MMDB
# This preserves the original structure: country, city, location, etc.
[[columns]]
name = "city_all"
database = "city"
path = []           # Copy entire record
output_path = []    # Merge into root

# Copy all Anonymous IP fields nested under traits
# This places Anonymous IP data under traits.is_anonymous, traits.is_anonymous_vpn, etc.
[[columns]]
name = "anonymous_all"
database = "anonymous"
path = []           # Copy entire record
output_path = ["traits"]  # Place under traits map

# Resulting MMDB structure:
# {
#   "country": {"iso_code": "US", "names": {...}},
#   "city": {"names": {...}},
#   "location": {"latitude": 37.751, "longitude": -97.822},
#   "traits": {
#     "is_anonymous": true,
#     "is_anonymous_vpn": false,
#     "is_hosting_provider": false,
#     ...
#   }
# }
